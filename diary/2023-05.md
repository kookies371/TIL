# 2023-05-02

## 잡담

주말 + 여행으로 약 10일간 휴가 보내고 옴.

휴가 직전에 시각화 자료를 임시로 만들어서 보낼 일이 있었는데, 시각화 코드 일부를 수정해서 급하게 만들어서 보냈다. 그런데 오늘 와서 보니,,, 이걸 다시 원상복구 시키는 것이 쉽지 않다. 저번에 임시 수정할 때 branch 파서 수정하고, 지금은 그냥 branch만 원복하면 되는 것을... 아직 git에 익숙하지 않다보니 이런 기초적인 활용법도 제대로 쓰지 못했다. ㅠㅠ

hotfix는 아니지만, 암튼 임시로 코드를 수정할 일이 있을 때조차도 git을 사용하는 것은 매우 강력하다는 것을 깨달은 계기.

## svg 파일

폰트 자동으로 다운로드 및 PIL 적용 코드를 찾다가 [네이버 공식 github](https://github.com/naver/nanumfont/blob/master/README.md)을 찾았다. README.md에 svg 로고가 있길래, 전에 살짝 공부했던 거 한 번 정리해봤다.

# 2023-05-03

## 잡담

오늘은 공부는 거의 못했다. 대학교 같은 과 형이 Rust에 푹 빠져있었던 기억이 나서 좀 검색하다보니, Unreal-Rust가 소개되었다는 소식과 같은,, 매우 흥미로운 소식을 봤다. [링크](https://careerly.co.kr/comments/68058)

항상 말로만 Rust 공부하겠다 했었고, 최근에는 언리얼을 공부하는 게 어떨까라고 진지하게 생각 중이었는데, 진짜로 공부를 시작할 좋은 기회인 듯.

# 2023-05-08

## Rust 입문

주말에 Rust 입문을 조금 공부했다. 

변수 및 container type, 함수 선언, 분기문 등등은 여타 프로그래밍 언어와 같아서 어렵지 않았다. 

역시나 문제는 **소유권**부터였는데, C++과 Python 정도만 공부해본 입장에서는 꽤 난해했다. string type의 변수를 함수에 넘기면 소유권이 바뀌며 bind가 해제된다...? 

그래도 bind가 해제되는 변수와 해제되지 않는 변수의 기준은 Python과 비슷한 것 같아 조금 나았지만, 이걸 실제 프로그래밍에서 오류 없이 사용할 수 있을 거라는 자신감은 없다. 심지어 Rust 입문 서적 4장의 마지막에 나온 예시에서 &str type을 사용하여 String과 str을 동시에 호환시킬 수 있다는 것까지 보니 type error도 체크하기 어려운데 이런 호환성까지 신경쓸 수 있으려면 확실히 공부를 많이 해야겠더라.

난해하긴 했지만, 아직 입문 수준이라 그런지 개념 자체를 이해하는 것은 어렵지 않았다. 직접 코드를 작성했을 때 미친듯이 버그 날 게 뻔하지만, 일단 첫 걸음은 만족.

# 2023-05-12

## 잡담

며칠 일이 급해서 개인 공부를 거의 못했다.

어제 오늘 잠시 여유가 생겨 기존 코드를 천천히 뜯어보면서 리팩토링할 수 있는 부분은 리팩토링하고 있었는데, 분명 사용되지 않는 코드라 판단하여 몇 부분 지웠더니 코드가 돌아가지 않는다..!

거의 3~4시간동안 도대체 어디를 지운 것이 문제인지 역추적해보니...

발생한 상황

- main.py에서 event.py의 변수 하나를 import 함
- 변수 import 후 아무런 수정이 없는데, event.py에서의 변수값과 main.py에서의 변수값이 다르다는 문제 발생

문제점

- main.py에는 event.py 말고도 main.py -> vis.py -> eventcategory.py 순서대로 import하는 구조가 있었음
- vis.py에서 eventcategory.py의 변수를 import하고 있었는데, 이는 코드 작성 초기에 eventcategory의 정보로 시각화 테스트 코드를 짰기 때문. 시간이 흘러 테스트용 코드가 필요없어져 eventcategory에서 가져온 변수들이 사용되지 않아 VS Code에서 흐린 색으로 표현됨.
- 그런데, eventcategory에는 event.py의 변수들의 내부값을 수정하는 코드가 있음. 즉 eventcategory.py를 어딘가에서 import하는 것만으로도 evetn.py의 변수들이 update되는 것.
- 앞서 말했뜨시 vis.py에서 eventcategory.py의 변수들이 사용되지 않으니 의존성이 없다고 판단, import 코드를 삭제함. 그런데 이 삭제로 인해 eventcategory.py를 import하는 부분이 하나도 남지 않아 event.py의 update 코드 역시 사라져버린 것.
- 결국 main.py와 event.py에서는 event와 관련된 변수를 단 한 번도 건드리지 않았는데, 뜬금없이 vis.py에서 의존성이 없다고 생각했던 import 한 줄을 건드린 것이 문제의 원인.
- 근본적인 문제점은 아래 두 가지로 요약할 수 있음.
  - eventcategory.py에서 event.py의 변수를 수정
  - main.py -> vis.py -> eventcategory.py로 이어지는 비직관적인 의존관계

해결책

- 당장은 일이 급하니 이 말도 안 되는 의존관계를 유지할 예정
- 천천히 개선할 시간이 생기면, 의존관계를 수정할 예정
  - data.py라는 데이터 로드를 담당하는 파일이 있는데, 이 파일에 event 정보 로딩 및 category 속성 부여도 포함시키기
  - event.py와 eventcategory.py에서 데이터 로드하는 부분 삭제
  - vis.py와 eventcategory.py 의존성 삭제

배운점
- 의존성 파악이 매우매우 중요함을 느꼈다. 의존성 설계를 트리구조로 해야 파악이 훨씬 쉬울 것 같고, 또 이 의존성 설계를 어기는 import는 test용으로도 있으면 안 된다.
- 테스트하고 싶으면 tests directory에서 하던가 if name == "main":  걸어놓고 여기서 import 하자. 그러면 나중에 지울 때도 안 헷갈릴 듯.
- 소유권...? 이라는 단어가 정확한 표현은 아닌 것 같지만 변수의 소유관계를 명확하게 설정해야 한다. eventcategory.py가 event.py의 변수를 수정한 것도 이 상황의 "근본적인 문제점" 중 하나라고 생각하는데, 어떤 파일에서 어떤 변수값을 수정할 지 예상할 수 없게 만들기 때문. (이게 함수형 프로그래밍의... 이유랑 연결되는 건가?)
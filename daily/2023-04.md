## 2023-04-05

### 멀티쓰레딩 vs 비동기 프로그래밍

[이 블로그](https://jayhyun-hwang.github.io/2021/09/02/The-Difference-Between-Asynchronous-And-Multi-Threading/) 덕분에 비동기 프로그래밍과 멀티쓰레딩의 차이를 좀 더 잘 이해한 듯

비동기 프로그래밍은 동시에 여러 task를 수행할 수 있는 task를 수행하는 개념이며, 멀티쓰레딩은 비동기 프로그래밍을 실현하는 방법 중 하나라고 이해했다.

또한 아래와 같이 구분하니 좀 더 명확해졌다

- 네트워크 및 파일 I/O - 스케줄링과 단일 CPU로도 충분히 좋음
- 대규모 연산 - 멀티쓰레딩을 통한 연산 분산

### Python asyncio

chatGPT랑 대화하다가 배운 생각도 못한 수확

원래는 api call을 빠르게 하는 방법으로 멀티쓰레딩만 고민했는데,,,

python에서 import asyncio를 하면 비동기 프로그래밍이 가능하게 해주는
async와 await 구문을 사용할 수 있다.

```python
import asyncio
import requests

async def fetch_url(url: str) -> requests.Response:
    response = await requests.get(url)

    return response

async def main():
    urls = [
        "url1",
        "url2", # ...
    ]

    futures = [asyncio.ensure_future(fetch(url)) for url in urls]
    result = await asyncio.gather(*futures)

    return result
```
와 같이 사용 가능하다.

아직 asyncio에 익숙하지 않고, async 및 await, 당장 예제에도 등장하는 ensure_future 등 익숙하지 않은 구문이 많다.